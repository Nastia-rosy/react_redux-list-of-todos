{"version":3,"sources":["store/index.ts","api/api.ts","components/User.tsx","components/TodoList.tsx","App.tsx","index.tsx"],"names":["setSortType","sortType","type","isLoading","state","loading","getTodos","todos","getSortType","initialState","store","createStore","action","API_URL","getTodosFromServer","a","Promise","all","fetch","then","response","json","todosFromServer","usersFromServer","map","todo","user","find","id","userId","User","className","name","TodoList","todoList","dispatch","useDispatch","completed","title","onClick","filter","App","useSelector","visibleTodos","useMemo","sort","b","localeCompare","getVisibleTodos","length","finishLoading","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.237884ab.chunk.js","sourcesContent":["import { createStore, AnyAction } from 'redux';\nimport { Todos } from '../api/api';\n\n// Action types - is just a constant. MUST have a unique value.\nconst START_LOADING = 'START_LOADING';\nconst FINISH_LOADING = 'FINISH_LOADING';\nconst SET_SORT_TYPE = 'SET_SORT_TYPE';\nconst DELETE_TODO = 'DELETE_TODO';\n\n// Action creators - a function returning an action object\nexport const startLoading = () => ({ type: START_LOADING });\nexport const finishLoading = (todos: Todos[]) => ({ type: FINISH_LOADING, todos });\nexport const setSortType = (sortType: string) => ({type: SET_SORT_TYPE, sortType});\nexport const deleteTodo = (todos: Todos[]) => ({type: DELETE_TODO, todos});\n\n\n// Selectors - a function receiving Redux state and returning some data from it\nexport const isLoading = (state: RootState) => state.loading;\nexport const getTodos = (state: RootState) => state.todos;\nexport const getSortType = (state: RootState) => state.sortType;\n\n//Initial state\nexport type RootState = {\n  loading: boolean;\n  todos: Todos[],\n  sortType: string,\n};\n\nconst initialState: RootState = {\n  loading: false,\n  todos: [],\n  sortType:'',\n};\n\n// rootReducer - this function is called after dispatching an action\nconst rootReducer = (state = initialState, action: AnyAction) => {\n  switch (action.type) {\n    case START_LOADING:\n      return {\n        ...state,\n        loading: true,\n      }\n    case FINISH_LOADING:\n      return {\n        ...state,\n        loading: false,\n        todos: action.todos,\n      }\n\n    case SET_SORT_TYPE:\n      return {\n        ...state,\n        sortType: action.sortType,\n      }\n\n    case DELETE_TODO:\n      return {\n        ...state,\n        todos: action.todos,\n      }\n\n    default:\n    return {\n      ...state\n    }\n  }\n}\n\n// The `store` should be passed to the <Provider store={store}> in `/src/index.tsx`\nconst store = createStore(\n  rootReducer,\n  initialState // allows you to use http://extension.remotedev.io/\n);\n\nexport default store;\n","const API_URL = 'https://mate-academy.github.io/react_dynamic-list-of-todos/api/';\n\nexport interface Users {\n  id: number;\n  name: string;\n}\n\nexport interface Todos {\n  id: number;\n  title: string;\n  completed: boolean;\n  userId: number;\n  user?: Users;\n}\n\nconst getTodos = (): Promise<Todos[]> => {\n  return fetch(`${API_URL}/todos.json`)\n    .then(response => response.json())\n};\n\nconst getUsers = (): Promise<Users[]> => {\n  return fetch(`${API_URL}/users.json`)\n    .then(response => response.json())\n};\n\nexport const getTodosFromServer = async() => {\n  const [todosFromServer, usersFromServer] = await Promise.all([getTodos(), getUsers()]);\n\n  return todosFromServer.map(todo => ({\n  ...todo,\n  user: usersFromServer.find(user => user.id === todo.userId),\n}));\n\n}\n","import React from 'react';\n\nimport { Todos } from '../api/api';\n\ntype Props = {\n  todo: Todos;\n}\n\nconst User: React.FC<Props> = ({ todo }) => (\n  <div>\n    <span className=\"todo_user-text\">Users name: &nbsp;</span>\n    {todo.user ? todo.user.name : ''}\n  </div>\n);\n\nexport default User;\n","import React from 'react';\nimport User from './User';\n\nimport { useDispatch } from 'react-redux';\nimport { deleteTodo } from '../store';\n\nimport { Todos } from '../api/api';\n\ntype Props = {\n  todoList: Todos[];\n}\n\nconst TodoList: React.FC<Props> = ({ todoList }) => {\n  const dispatch = useDispatch();\n\n  const deleteSelectedTodo = (id: number) => {\n    dispatch(deleteTodo(todoList.filter(todo => todo.id !== id)))\n  }\n\n  return (\n    <ul className=\"todo_list\">\n      {todoList.map(todo => (\n        <li className={\n          todo.completed\n            ? 'todo_item todo_item-done'\n            : 'todo_item'\n        }>\n          <User todo={todo} />\n          <div>\n            <span className=\"todo_title-text\">\n              Todos: &nbsp;\n            </span>\n            {todo.title}\n          </div>\n          <div className=\"todo_status\">\n            {todo.completed\n              ? 'True'\n              : 'False'}\n          </div>\n          <button\n            type=\"button\"\n            className=\"button delete-button\"\n            onClick={() => deleteSelectedTodo(todo.id)}\n          >\n            Delete\n          </button>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default TodoList;\n","import React, { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getTodosFromServer, Todos } from './api/api';\n\n\nimport './App.scss';\nimport TodoList from './components/TodoList';\n\nimport { isLoading, startLoading, finishLoading, getTodos, setSortType, getSortType } from './store';\n\nconst getVisibleTodos = (todos: Todos[], sortType: string) => {\n  switch (sortType) {\n    case 'title':\n      return [...todos].sort((a, b) => a.title.localeCompare(b.title));\n\n    case 'userName':\n      return [...todos].sort((a, b) => {\n        return a.user && b.user\n          ? a.user.name.localeCompare(b.user.name)\n          : 0;\n      });\n\n    case 'id':\n      return [...todos].sort((a, b) => a.id - b.id);\n\n    default:\n      return todos;\n  }\n}\n\nconst App = () => {\n  const loading = useSelector(isLoading);\n  const todos = useSelector(getTodos)\n  const sortType = useSelector(getSortType);\n  const dispatch = useDispatch();\n\n  const handleLoadClick = () => {\n    dispatch(startLoading());\n\n    getTodosFromServer()\n      .then(todosFromServer => dispatch(finishLoading(todosFromServer)))\n  }\n\n  const visibleTodos = useMemo(\n    () => getVisibleTodos(todos, sortType),\n    [sortType, todos]\n  )\n\n  return (\n    <div className=\"App\">\n      <h1>Redux list of todos</h1>\n\n      {todos.length === 0\n        ? (\n          <>\n            <button\n              onClick={handleLoadClick}\n              type=\"button\"\n              className=\"buttonload\"\n            >\n              <i className={loading ? \"fa fa-spinner fa-spin\" : \"\"}>\n              </i>\n              {loading ? 'Loading' : 'Load'}\n            </button>\n          </>\n        )\n        : (\n          <>\n            <button\n              type=\"button\"\n              onClick={() => dispatch(setSortType('title'))}\n              className=\"button left\"\n            >\n              Sort by title\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => dispatch(setSortType('id'))}\n              className=\"button\"\n            >\n              Sort by id\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => dispatch(setSortType('userName'))}\n              className=\"button\"\n            >\n              Sort by user\n            </button>\n\n            <TodoList todoList={visibleTodos} />\n          </>\n        )}\n    </div>\n  );\n};\n\nexport default App;\n\n/*\n      <h2>{loading ? 'Loading...' : message}</h2>\n\n      <Start title=\"Start loading\" />\n      <Finish title=\"Succeed loading\" message=\"Loaded successfully!\" />\n      <Finish title=\"Fail loading\" message=\"An error occurred when loading data.\" />*/\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport store from './store';\nimport App from './App';\n\n// Just a convenient component with all the wrappers for the `App`\n// The Router component (if you use it) should be placed inside the Provider\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}